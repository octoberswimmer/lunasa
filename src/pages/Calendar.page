<apex:page
	contentType="text/html"
	docType="html"
	showHeader="true"
	sidebar="false"
	standardStylesheets="false"
	title="Lunasa"
	>
	<apex:remoteObjects jsNamespace="Lunasa">
		<apex:remoteObjectModel name="Event">
			<apex:remoteObjectField name="EndDateTime" />
			<apex:remoteObjectField name="Description" />
			<apex:remoteObjectField name="IsAllDayEvent" />
			<apex:remoteObjectField name="StartDateTime" />
			<apex:remoteObjectField name="Subject" />
		</apex:remoteObjectModel>
	</apex:remoteObjects>

	<!-- TODO: get these meta tags into the document <head/> -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

	<apex:stylesheet value="{!URLFOR($Resource.Calendar, 'main.css')}" />
	<noscript>
		You need to enable JavaScript to run this app.
	</noscript>
	<div id="root"></div>
	<script src="{!URLFOR($Resource.Calendar, 'main.js')}" />
	<script>
		lunasa({
			accountFieldSet: [
			<apex:repeat value="{!$ObjectType.Account.FieldSets.CalendarCard}" var="f">
				{
					name: "{!JSINHTMLENCODE(f)}",
					label: "{!JSINHTMLENCODE(f.Label)}",
					type: "{!JSINHTMLENCODE(f.Type)}",
					dbRequired: {!f.DBRequired}
				},
			</apex:repeat>
			null
			].filter(function(x) { return !!x; }),
			eventCreateFieldSet: [
			<apex:repeat value="{!$ObjectType.Event.FieldSets.CreateEvent}" var="f">
				{
					name: "{!JSINHTMLENCODE(f)}",
					label: "{!JSINHTMLENCODE(f.Label)}",
					type: "{!JSINHTMLENCODE(f.Type)}",
					dbRequired: {!f.DBRequired}
				},
			</apex:repeat>
			null
			].filter(function(x) { return !!x; }),
			root: document.getElementById("root"),
			sessionToken: "{!JSINHTMLENCODE($Api.Session_ID)}",
		});
	</script>
</apex:page>
